{"version":3,"sources":["Leaderboard.jsx","data.js","App.jsx","Intro.jsx","index.js"],"names":["Leaderboard","data","width","d3Ref","useRef","useState","length","height","setHeight","useEffect","svg","d3","current","maxValue","map","d","value","x","domain","range","y","fontSize","textColor","g","selectAll","id","gEnter","enter","append","attr","text","label","gUpdate","merge","transition","ease","duration","i","select","exit","remove","ref","DATA","App","useMeasure","debounce","leaderboardWidth","setData","refreshData","useCallback","size","Promise","resolve","sort","Math","random","slice","getData","then","className","onClick","Intro","href","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.061b536f.chunk.js","sourcesContent":["import { useRef, useState, useEffect } from 'react';\nimport * as d3 from 'd3';\n\nfunction Leaderboard({data, width}) {\n  const d3Ref = useRef(null);\n\n  // Constants\n  const rowHeight = 60;\n  const barHeight = 10;\n  const marginText = 2;\n\n  // Set the dimensions and margins of the graph\n  const [height, setHeight] = useState(rowHeight * data.length ?? 0);\n\n  useEffect(() => {\n    setHeight(rowHeight * data.length);\n    const height = rowHeight * data.length;\n\n    // Add only once the root SVG with the correct margins\n    const svg = d3.select(d3Ref.current);\n\n    // Scales\n    const maxValue = d3.max(data.map(d => +d.value)) ?? 1;\n    const x = d3.scaleLinear().domain([0, maxValue]).range([5, width]);\n    const y = d3.scaleLinear().domain([0, data.length]).range([0, height]);\n\n    const fontSize = '1.1rem';\n\n    const textColor = '#000000';\n    const bgColor = '#d4d8df';\n    const barColor = '#3d76c1'; \n    \n    // Join the data\n    // We use the ID to find rows of same data\n    const g = svg.selectAll('g').data(data, d => d.id);\n\n    // Initialization\n    const gEnter = g.enter()\n      .append('g')\n        .attr('transform', `translate(0, ${y(data.length) + 500})`);\n\n    // Append background rect as child\n    gEnter\n      .append('rect')\n        .attr('class', 'bg')\n        .attr('fill', bgColor)\n        .attr('x', 0).attr('y', marginText)\n        .attr('rx', 5).attr('ry', 5)\n        .attr('height', barHeight);\n\n    // Append main rect as child\n    gEnter\n      .append('rect')\n        .attr('class', 'main')\n        .attr('fill', barColor)\n        .attr('x', 0).attr('y', marginText)\n        .attr('rx', 5).attr('ry', 5)\n        .attr('height', barHeight);\n\n    // Append label text as child\n    gEnter\n      .append('text')\n        .attr('class', 'label')\n        .attr('font-size', fontSize)\n        .attr('fill', textColor)\n        .attr('x', 0)\n        .attr('y', -5)\n        .text(d => d.label);\n\n    // Append value text as child\n    gEnter\n      .append('text')\n        .attr('class', 'value')\n        .attr('text-anchor', 'end')\n        .attr('fill', textColor)\n        .attr('font-size', fontSize)\n        .attr('y', -5);\n\n    // Update each g row, when data changes\n    const gUpdate = g.merge(gEnter);\n    gUpdate\n      .transition()\n        .ease(d3.easePoly)\n        .duration(500)\n        .attr('transform', (d, i) => `translate(0, ${y(i) + 30})`);\n\n    // Update rect bg\n    gUpdate\n      .select('rect.bg')\n      .attr('width', x(maxValue));\n\n    // Update rect main\n    gUpdate\n      .select('rect.main')\n      .transition()\n        .ease(d3.easePolyOut)\n        .duration(1000)\n        .attr('width', d => x(d.value));\n    \n    // Update value text\n    gUpdate\n      .select('text.value')\n      .text(d => d.value)\n      .attr('x', x(maxValue));\n    \n    // Exit animation\n    g.exit()\n        .attr('opacity', 1)\n      .transition()\n        .ease(d3.easeLinear)\n        .duration(200)\n        .attr('transform', (d, i) => `translate(-50, ${y(i)})`)\n        .attr('opacity', 0)\n      .remove();\n  }, [d3Ref, data, width, marginText, rowHeight, barHeight]);\n\n  return (\n    <svg\n      width={width}\n      height={height}\n      ref={d3Ref}\n    />\n  );\n}\n\nexport default Leaderboard;","const DATA = [\n  {\"id\":1,\"value\":6,\"label\":\"United States\"},\n  {\"id\":2,\"value\":83,\"label\":\"Sweden\"},\n  {\"id\":3,\"value\":31,\"label\":\"Belarus\"},\n  {\"id\":4,\"value\":28,\"label\":\"Iran\"},\n  {\"id\":5,\"value\":6,\"label\":\"Philippines\"},\n  {\"id\":8,\"value\":46,\"label\":\"Malaysia\"},\n  {\"id\":9,\"value\":34,\"label\":\"Czech Republic\"},\n  {\"id\":11,\"value\":48,\"label\":\"France\"},\n  {\"id\":14,\"value\":5,\"label\":\"Moldova\"},\n  {\"id\":15,\"value\":33,\"label\":\"Indonesia\"},\n  {\"id\":17,\"value\":33,\"label\":\"Ukraine\"},\n  {\"id\":21,\"value\":7,\"label\":\"Germany\"},\n  {\"id\":23,\"value\":38,\"label\":\"Argentina\"},\n  {\"id\":25,\"value\":92,\"label\":\"Peru\"},\n  {\"id\":26,\"value\":37,\"label\":\"Brazil\"},\n  {\"id\":32,\"value\":29,\"label\":\"Kyrgyzstan\"},\n  {\"id\":33,\"value\":85,\"label\":\"Afghanistan\"},\n  {\"id\":35,\"value\":17,\"label\":\"Japan\"},\n  {\"id\":36,\"value\":57,\"label\":\"Indonesia\"},\n  {\"id\":37,\"value\":50,\"label\":\"Nigeria\"},\n  {\"id\":39,\"value\":8,\"label\":\"Tunisia\"},\n  {\"id\":41,\"value\":67,\"label\":\"Armenia\"},\n  {\"id\":42,\"value\":92,\"label\":\"Russia\"},\n  {\"id\":43,\"value\":1,\"label\":\"Colombia\"},\n  {\"id\":45,\"value\":74,\"label\":\"Vietnam\"},\n  {\"id\":48,\"value\":21,\"label\":\"Poland\"},\n  {\"id\":51,\"value\":96,\"label\":\"Brazil\"},\n  {\"id\":54,\"value\":95,\"label\":\"Germany\"},\n  {\"id\":58,\"value\":41,\"label\":\"Belarus\"},\n  {\"id\":61,\"value\":77,\"label\":\"Ecuador\"},\n  {\"id\":68,\"value\":33,\"label\":\"Portugal\"},\n  {\"id\":71,\"value\":70,\"label\":\"Philippines\"},\n  {\"id\":74,\"value\":58,\"label\":\"United States\"},\n  {\"id\":75,\"value\":65,\"label\":\"Sri Lanka\"},\n  {\"id\":77,\"value\":74,\"label\":\"Russia\"},\n  {\"id\":81,\"value\":96,\"label\":\"Comoros\"},\n  {\"id\":82,\"value\":57,\"label\":\"Greece\"},\n  {\"id\":83,\"value\":32,\"label\":\"Vietnam\"},\n  {\"id\":84,\"value\":81,\"label\":\"Sweden\"},\n  {\"id\":85,\"value\":35,\"label\":\"Ivory Coast\"},\n  {\"id\":86,\"value\":49,\"label\":\"Slovenia\"},\n  {\"id\":87,\"value\":63,\"label\":\"Finland\"},\n  {\"id\":90,\"value\":36,\"label\":\"Portugal\"},\n  {\"id\":91,\"value\":60,\"label\":\"Macedonia\"},\n  {\"id\":93,\"value\":99,\"label\":\"Netherlands\"},\n  {\"id\":97,\"value\":19,\"label\":\"Croatia\"},\n  {\"id\":98,\"value\":28,\"label\":\"Luxembourg\"},\n  {\"id\":99,\"value\":59,\"label\":\"France\"},\n  {\"id\":100,\"value\":76,\"label\":\"Marshall Islands\"},\n];\n\n// Return random data from a mock data array\nexport function getData(size = 7) {\n  return new Promise(resolve => {\n    const shuffled = DATA.sort(() => 0.5 - Math.random());\n    resolve(shuffled.slice(0, size));\n  });\n}","import './App.css';\nimport Leaderboard from './Leaderboard';\nimport { getData } from './data';\nimport { useEffect, useState, useCallback } from 'react';\nimport useMeasure from 'react-use-measure';\n\nfunction App() {\n  // Leaderboard panel width\n  const [ref, {width: leaderboardWidth}] = useMeasure({debounce: 100});\n\n  // Leaderboard data\n  const [data, setData] = useState([]);\n\n  // Update the array\n  const refreshData = useCallback(() => getData().then(d => setData(d)), []);\n\n  // Fill the data array at the page load\n  useEffect(() => refreshData(), [refreshData]);\n\n  return (\n    <div className=\"app\">\n      <div className=\"leaderboard-container\" ref={ref}>\n        <Leaderboard\n          data={data}\n          width={leaderboardWidth}\n        />\n      </div>\n\n      <div className=\"button\">\n        <button onClick={() => refreshData()}>Refresh Data</button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import './Intro.css';\n\nfunction Intro() {\n  return (\n    <div className=\"intro\">\n      <h1>D3.js Leaderboard</h1>\n\n      <p>\n        Here is a small leaderboard made with D3.js. It is responsive, updates in real-time and can be easily customized.\n      </p>\n\n      <p>\n        Check out the <a href=\"https://github.com/rhidra/d3js-leaderboard\">source code here</a>, and \n        the original <a href=\"https://blog.remyhidra.dev/\">blog post here</a>.\n      </p>\n    </div>\n  );\n}\n\nexport default Intro;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport Intro from './Intro';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Intro/>\n    <div className=\"wrapper\">\n      <App />\n    </div>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}